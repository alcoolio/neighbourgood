/* ── Design Tokens ───────────────────────────────────────────────── */

:root {
	/* Bright Mode (default) — warm terracotta & cream palette */
	--color-bg: #fdf8f3;
	--color-surface: #ffffff;
	--color-surface-raised: #fef9f5;
	--color-text: #2d1b0e;
	--color-text-muted: #7a5c47;
	--color-text-subtle: #b89078;
	--color-primary: #c95d1b;
	--color-primary-hover: #a84d16;
	--color-primary-light: #fef0e4;
	--color-accent: #2a9e70;
	--color-accent-light: #ecfdf5;
	--color-border: #e8d5c2;
	--color-border-hover: #d4b89a;
	--color-error: #dc2626;
	--color-error-bg: #fef2f2;
	--color-warning: #d97706;
	--color-warning-bg: #fffbeb;
	--color-success: #16a34a;
	--color-success-bg: #f0fdf4;
	--color-status-dot: #16a34a;

	--font-heading: 'Abril Fatface', Georgia, 'Times New Roman', serif;
	--font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;

	--radius-sm: 0.5rem;
	--radius: 0.75rem;
	--radius-md: 0.75rem;
	--radius-lg: 1rem;
	--radius-xl: 1.5rem;

	--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
	--shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
	--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -2px rgba(0, 0, 0, 0.04);
	--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.04);

	--transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
	--transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);
	--transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
	--transition-spring: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

	color-scheme: light;
}

/* ── Dark Mode ──────────────────────────────────────────────────── */

:root[data-theme='dark'] {
	--color-bg: #0f0f1a;
	--color-surface: #1a1a2e;
	--color-surface-raised: #22223b;
	--color-text: #e8e8ed;
	--color-text-muted: #9ca3af;
	--color-text-subtle: #6b7280;
	--color-primary: #818cf8;
	--color-primary-hover: #6366f1;
	--color-primary-light: #1e1b4b;
	--color-accent: #34d399;
	--color-accent-light: #064e3b;
	--color-border: #2d2d44;
	--color-border-hover: #3d3d5c;
	--color-error: #f87171;
	--color-error-bg: #450a0a;
	--color-warning: #fbbf24;
	--color-warning-bg: #451a03;
	--color-success: #34d399;
	--color-success-bg: #064e3b;
	--color-status-dot: #34d399;

	--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
	--shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
	--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
	--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -4px rgba(0, 0, 0, 0.3);

	color-scheme: dark;
}

/* Red Sky Mode overrides */
:root[data-mode='red'] {
	--color-bg: #1a1a1a;
	--color-surface: #2d2d2d;
	--color-surface-raised: #3d3d3d;
	--color-text: #f5f5f5;
	--color-text-muted: #a3a3a3;
	--color-primary: #ef4444;
	--color-primary-hover: #dc2626;
	--color-primary-light: #450a0a;
	--color-accent: #f59e0b;
	--color-border: #404040;
	--color-status-dot: #ef4444;
	--radius: 0.25rem;
	--shadow: none;
}

/* ── Low-bandwidth Mode ─────────────────────────────────────────── */
/* Eliminates all transitions, animations, shadows, and images so   */
/* the UI is usable on slow or metered connections. Activated       */
/* automatically when the platform is in Red Sky (crisis) mode.     */

:root[data-bandwidth='low'] {
	--transition-fast: 0ms;
	--transition: 0ms;
	--transition-slow: 0ms;
	--transition-spring: 0ms;
	--shadow-sm: none;
	--shadow: none;
	--shadow-md: none;
	--shadow-lg: none;
}

:root[data-bandwidth='low'] * {
	transition: none !important;
	animation: none !important;
	/* Prevent CSS background-image URLs from being fetched */
	background-image: none !important;
}

/* Suppress all <img> elements — components gate rendering via {#if}
   but this catches any that slip through and prevents layout shift */
:root[data-bandwidth='low'] img {
	display: none !important;
}

/* Collapse image container slots so they don't reserve empty space */
:root[data-bandwidth='low'] .card-image,
:root[data-bandwidth='low'] .detail-image,
:root[data-bandwidth='low'] .res-image,
:root[data-bandwidth='low'] .hero-image,
:root[data-bandwidth='low'] .resource-image {
	display: none !important;
}

/* Remove the Inter font preconnect effect – browser won't fetch   */
/* web fonts when the element is hidden via JS (see layout).       */
:root[data-bandwidth='low'] .low-bw-hide {
	display: none;
}

/* Compact layout: tighter padding to reduce scroll distance */
:root[data-bandwidth='low'] .page-content {
	padding: 0.75rem 1rem;
}

/* Flatten card borders and remove rounded corners for faster paint */
:root[data-bandwidth='low'] .feature-card,
:root[data-bandwidth='low'] .resource-card,
:root[data-bandwidth='low'] .section-card {
	border-radius: 0 !important;
	box-shadow: none !important;
}

/* ── Reset & Base ───────────────────────────────────────────────── */

*, *::before, *::after {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

body {
	font-family: var(--font-body);
	background-color: var(--color-bg);
	color: var(--color-text);
	line-height: 1.6;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	transition: background-color var(--transition), color var(--transition);
}

h1, h2 {
	font-family: var(--font-heading);
	font-weight: 400;
	line-height: 1.2;
	letter-spacing: -0.01em;
}

/* ── Shared page layout ─────────────────────────────────────────── */

.page-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 1.5rem;
	gap: 1rem;
}

.page-header h1 {
	margin: 0;
	font-size: 1.9rem;
}

@media (max-width: 480px) {
	.page-header {
		flex-wrap: wrap;
	}
	.page-header h1 {
		font-size: 1.6rem;
	}
}

/* Filter bars (resources, skills pages) */
.filter-bar {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	margin-bottom: 1.5rem;
	flex-wrap: wrap;
}

a {
	color: var(--color-primary);
	text-decoration: none;
	transition: color var(--transition-fast);
}

a:hover {
	text-decoration: underline;
}

/* ── Utility animations ─────────────────────────────────────────── */

.fade-in {
	animation: fadeIn var(--transition-slow) ease-out;
}

.slide-up {
	animation: slideUp var(--transition-slow) ease-out;
}

@keyframes fadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}

@keyframes slideUp {
	from { opacity: 0; transform: translateY(12px); }
	to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.5; }
}

/* ── Form elements ──────────────────────────────────────────────── */

input, textarea, select {
	font-family: inherit;
	transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

input:focus, textarea:focus, select:focus {
	outline: none;
	border-color: var(--color-primary);
	box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
}

/* ── Utility classes ───────────────────────────────────────────── */

/* Alerts */
.alert {
	padding: 0.65rem 1rem;
	border-radius: var(--radius);
	font-size: 0.9rem;
	margin-bottom: 1rem;
}

.alert-error {
	background: var(--color-error-bg);
	color: var(--color-error);
	border: 1px solid var(--color-error);
}

.alert-success {
	background: var(--color-success-bg);
	color: var(--color-success);
	border: 1px solid var(--color-success);
}

.alert-warning {
	background: var(--color-warning-bg);
	color: var(--color-warning);
	border: 1px solid var(--color-warning);
}

.alert-info {
	background: var(--color-primary-light);
	color: var(--color-primary);
	border: 1px solid var(--color-primary);
}

.alert-info a {
	color: inherit;
	font-weight: 600;
}

/* Tags / Badges */
.tag {
	display: inline-block;
	font-size: 0.72rem;
	font-weight: 500;
	padding: 0.12rem 0.45rem;
	border-radius: 999px;
	background: var(--color-primary-light);
	color: var(--color-primary);
}

.badge {
	display: inline-block;
	font-size: 0.7rem;
	font-weight: 600;
	padding: 0.1rem 0.45rem;
	border-radius: 999px;
	text-transform: uppercase;
	letter-spacing: 0.03em;
}

/* Empty state */
.empty-state {
	text-align: center;
	padding: 3rem 1rem;
	color: var(--color-text-muted);
}

.empty-state p + p {
	margin-top: 0.5rem;
}

/* Loading */
.loading-text {
	text-align: center;
	color: var(--color-text-muted);
	padding: 2rem;
}

/* ── RTL (Right-to-Left) Layout Support ──────────────────────────
   Applied when [dir='rtl'] is set on <html> (Arabic, Urdu, etc.).
   Uses logical CSS properties where possible; explicit overrides
   where component CSS hardcodes physical directions.               */

[dir='rtl'] body {
	font-family: var(--font-body);
	/* Arabic/Urdu text renders better with slightly more line-height */
	line-height: 1.8;
}

/* Navigation: flip horizontal order */
[dir='rtl'] .nav-inner {
	flex-direction: row-reverse;
}

[dir='rtl'] .nav-links {
	flex-direction: row-reverse;
}

[dir='rtl'] .nav-brand {
	flex-direction: row-reverse;
}

[dir='rtl'] .nav-user-group {
	flex-direction: row-reverse;
}

/* Form inputs: align text right for RTL */
[dir='rtl'] input,
[dir='rtl'] textarea,
[dir='rtl'] select {
	text-align: right;
	direction: rtl;
}

/* Page header: reverse order */
[dir='rtl'] .page-header {
	flex-direction: row-reverse;
}

/* Filter bars */
[dir='rtl'] .filter-bar {
	flex-direction: row-reverse;
}

/* Cards: reverse internal flex where needed */
[dir='rtl'] .feature-card,
[dir='rtl'] .resource-card {
	text-align: right;
}

/* Alert / banner: reverse icon + text order */
[dir='rtl'] .alert,
[dir='rtl'] .crisis-banner,
[dir='rtl'] .update-banner {
	direction: rtl;
}

/* ── Arabic / Urdu font stack ───────────────────────────────────
   System Arabic fonts render well — no web font needed.
   Abril Fatface (headings) does not support Arabic glyphs so
   we fall back to system serif for RTL headings.                 */

[dir='rtl'] h1,
[dir='rtl'] h2,
[dir='rtl'] h3 {
	font-family: 'Segoe UI', 'Noto Sans Arabic', 'Arabic Typesetting', 'Amiri', serif;
	letter-spacing: 0;
}

[dir='rtl'] body,
[dir='rtl'] p,
[dir='rtl'] button,
[dir='rtl'] a,
[dir='rtl'] label,
[dir='rtl'] span {
	font-family: 'Segoe UI', 'Noto Sans Arabic', 'Noto Naskh Arabic', system-ui, sans-serif;
}
